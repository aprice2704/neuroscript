DEFINE PROCEDURE TestExecFail()
COMMENT:
    PURPOSE: Tests if TOOL.ExecuteCommand correctly captures exit code and stderr for a known failing command.
    INPUTS: None
    OUTPUT: The result map from TOOL.ExecuteCommand.
    ALGORITHM: Call TOOL.ExecuteCommand with 'ls' on a non-existent file. Return the result map.
ENDCOMMENT

CALL TOOL.ExecuteCommand("ls", ["non_existent_file_asdfjkl"])
SET exec_result = LAST

EMIT "--- Testing ExecuteCommand with guaranteed failure ---"
EMIT "--- ExecuteCommand Result Map ---"
EMIT exec_result

RETURN exec_result

END
