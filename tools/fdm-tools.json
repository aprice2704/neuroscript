[
  {
    "spec": {
      "name": "get_noetic_script",
      "groupname": "fdm.agent",
      "fullname": "",
      "description": "Retrieves the agent's own startup (Noetic) script source.",
      "returnType": "string"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_charter_capsule",
      "groupname": "fdm.agent",
      "fullname": "",
      "description": "Retrieves the contents of the agent's charter capsule.",
      "returnType": "any"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_message_handler_capsule",
      "groupname": "fdm.agent",
      "fullname": "",
      "description": "Retrieves the contents of the agent's message handler capsule.",
      "returnType": "any"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "List",
      "groupname": "FDM.Services",
      "fullname": "",
      "description": "Lists the status of all registered FDM services.",
      "returnType": "slice_map",
      "returnHelp": "Returns a list of maps, each detailing a service: id, status, priority, info."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Send",
      "groupname": "FDM.IPC",
      "fullname": "",
      "description": "Encodes arbitrary data into a high-performance binary envelope and sends it to a connected IPC client like Lotfi.",
      "args": [
        {
          "name": "data",
          "type": "any",
          "description": "The data (map, list, string, etc.) to send.",
          "required": true
        }
      ],
      "returnType": "bool",
      "returnHelp": "Returns true on success, false otherwise."
    },
    "requiresTrust": false,
    "isInternal": false,
    "requiredCaps": [
      {
        "Resource": "ipc",
        "Verbs": [
          "write"
        ],
        "Scopes": null
      }
    ],
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "unlock",
      "groupname": "fdm.kms",
      "fullname": "",
      "description": "Unseals the Key Management Service. Privileged.",
      "args": [
        {
          "name": "passphrase",
          "type": "string",
          "description": "",
          "required": false
        },
        {
          "name": "raw_key_b64",
          "type": "string",
          "description": "",
          "required": false
        }
      ],
      "returnType": "map"
    },
    "requiresTrust": true,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "lock",
      "groupname": "fdm.kms",
      "fullname": "",
      "description": "Seals the Key Management Service. Privileged.",
      "returnType": "map"
    },
    "requiresTrust": true,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "status",
      "groupname": "fdm.kms",
      "fullname": "",
      "description": "Gets the current status of the Key Management Service.",
      "returnType": "map"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "generate",
      "groupname": "fdm.kms",
      "fullname": "",
      "description": "Generates a new named key. Privileged.",
      "args": [
        {
          "name": "label",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "kind",
          "type": "string",
          "description": "One of: Ed25519, X25519, HMAC, AES256",
          "required": true
        }
      ],
      "returnType": "map"
    },
    "requiresTrust": true,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "sign",
      "groupname": "fdm.kms",
      "fullname": "",
      "description": "Signs a message with a named key.",
      "args": [
        {
          "name": "label",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "data_b64",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "key_id",
          "type": "string",
          "description": "",
          "required": false
        }
      ],
      "returnType": "map"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_public",
      "groupname": "fdm.kms",
      "fullname": "",
      "description": "Retrieves the public key for a named asymmetric key.",
      "args": [
        {
          "name": "label",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "key_id",
          "type": "string",
          "description": "",
          "required": false
        }
      ],
      "returnType": "map"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Create",
      "groupname": "FDM.Project",
      "fullname": "",
      "description": "Creates a new project node.",
      "args": [
        {
          "name": "id",
          "type": "string",
          "description": "Unique machine ID (e.g., 'fdm-core').",
          "required": true
        },
        {
          "name": "name",
          "type": "string",
          "description": "Human-readable name.",
          "required": true
        },
        {
          "name": "repos",
          "type": "slice_string",
          "description": "List of repository URLs.",
          "required": false
        },
        {
          "name": "goals",
          "type": "slice_string",
          "description": "List of high-level goals.",
          "required": false
        },
        {
          "name": "overlays",
          "type": "slice_string",
          "description": "List of overlay IDs.",
          "required": false
        },
        {
          "name": "teamGroupID",
          "type": "string",
          "description": "NodeID of the team group node.",
          "required": false
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns a map representing the new project node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Get",
      "groupname": "FDM.Project",
      "fullname": "",
      "description": "Retrieves a project node by its unique project ID.",
      "args": [
        {
          "name": "id",
          "type": "string",
          "description": "The unique machine ID of the project.",
          "required": true
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns a map representing the project node, or nil if not found."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Update",
      "groupname": "FDM.Project",
      "fullname": "",
      "description": "Updates fields on an existing project node.",
      "args": [
        {
          "name": "id",
          "type": "string",
          "description": "The unique ID of the project to update.",
          "required": true
        },
        {
          "name": "fields",
          "type": "map",
          "description": "A map of field names (string) to new values (any).",
          "required": true
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns a map representing the updated project node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "CreateNode",
      "groupname": "FDM",
      "fullname": "",
      "description": "Creates a new node in the FDM.",
      "args": [
        {
          "name": "type",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "fields",
          "type": "map",
          "description": "",
          "required": false
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns a map representing the newly created node, including its ID."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "GetNode",
      "groupname": "FDM",
      "fullname": "",
      "description": "Retrieves a node by its ID from the FDM.",
      "args": [
        {
          "name": "id",
          "type": "string",
          "description": "",
          "required": true
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns a map representing the node's data, or nil if not found."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "DeleteNode",
      "groupname": "FDM",
      "fullname": "",
      "description": "Deletes a node by its ID from the FDM.",
      "args": [
        {
          "name": "id",
          "type": "string",
          "description": "",
          "required": true
        }
      ],
      "returnType": "bool",
      "returnHelp": "Returns true on success or if node didn't exist."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Query",
      "groupname": "FDM",
      "fullname": "",
      "description": "Performs a filtered query for nodes in the FDM.",
      "args": [
        {
          "name": "filter",
          "type": "map",
          "description": "A map defining the filter criteria (e.g., {'type': 'agent', 'agent:class': 'ai'}).",
          "required": true
        },
        {
          "name": "limit",
          "type": "int",
          "description": "An optional maximum number of results to return.",
          "required": false
        }
      ],
      "returnType": "slice_map",
      "returnHelp": "Returns a list of maps, where each map represents a matched node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "RegisterOverlay",
      "groupname": "FDM",
      "fullname": "",
      "description": "Creates and registers a standard, named overlay required by a script.",
      "args": [
        {
          "name": "overlayName",
          "type": "string",
          "description": "The name of the overlay to register (e.g., 'forum:vote').",
          "required": true
        }
      ],
      "returnType": "bool",
      "returnHelp": "Returns true on success or if already registered."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "ListMeta",
      "groupname": "FDM.Overlays",
      "fullname": "",
      "description": "Lists metadata for all registered overlays.",
      "returnType": "slice_map",
      "returnHelp": "Returns a list of maps, where each map contains metadata about an overlay: id, kind, label, node_count, file_count"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Find",
      "groupname": "FDM.Symbol",
      "fullname": "",
      "description": "Finds all definitions of a given Go symbol.",
      "args": [
        {
          "name": "symbolName",
          "type": "string",
          "description": "The exact name of the symbol to find (e.g., 'NewFDM').",
          "required": true
        }
      ],
      "returnType": "slice_map",
      "returnHelp": "Returns a list of maps, each detailing a symbol definition with keys: 'file', 'pos', 'kind', 'recv'."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Create",
      "groupname": "FDM.Plan",
      "fullname": "",
      "description": "Creates a new, empty ingest_plan node for a given repository path.",
      "args": [
        {
          "name": "repoPath",
          "type": "string",
          "description": "The local filesystem path to the repository to be ingested.",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the NodeID of the newly created ingest_plan node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "AddOverlay",
      "groupname": "FDM.Plan",
      "fullname": "",
      "description": "Adds an overlay to an ingest_plan, creating a new version of the plan.",
      "args": [
        {
          "name": "planID",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "overlayID",
          "type": "string",
          "description": "",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the NodeID of the new, updated ingest_plan node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "AddIndex",
      "groupname": "FDM.Plan",
      "fullname": "",
      "description": "Adds an index to an ingest_plan, creating a new version of the plan.",
      "args": [
        {
          "name": "planID",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "indexID",
          "type": "string",
          "description": "",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the NodeID of the new, updated ingest_plan node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "AddIgnorePatterns",
      "groupname": "FDM.Plan",
      "fullname": "",
      "description": "Adds a list of glob patterns to an ingest_plan's ignore list.",
      "args": [
        {
          "name": "planID",
          "type": "string",
          "description": "The NodeID of the ingest_plan to modify.",
          "required": true
        },
        {
          "name": "patterns",
          "type": "any",
          "description": "A list of glob patterns to add (e.g., ['**/node_modules', '*.log']).",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the NodeID of the new, updated ingest_plan node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "SetRespectGitignore",
      "groupname": "FDM.Plan",
      "fullname": "",
      "description": "Sets whether the ingestion plan should respect .gitignore files.",
      "args": [
        {
          "name": "planID",
          "type": "string",
          "description": "The NodeID of the ingest_plan to modify.",
          "required": true
        },
        {
          "name": "respect",
          "type": "bool",
          "description": "Set to true to respect .gitignore, false to ignore it.",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the NodeID of the new, updated ingest_plan node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "AddExcludeMIMETypes",
      "groupname": "FDM.Plan",
      "fullname": "",
      "description": "Adds a list of MIME types to the plan's exclusion list.",
      "args": [
        {
          "name": "planID",
          "type": "string",
          "description": "The NodeID of the ingest_plan to modify.",
          "required": true
        },
        {
          "name": "mimeTypes",
          "type": "any",
          "description": "A list of MIME type strings to exclude (e.g., ['image/png', 'application/pdf']).",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the NodeID of the new, updated ingest_plan node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Ingest",
      "groupname": "FDM.Repo",
      "fullname": "",
      "description": "Executes a full ingestion process by walking the entire repository based on a specified ingest_plan.",
      "args": [
        {
          "name": "planID",
          "type": "string",
          "description": "The NodeID of the ingest_plan to execute.",
          "required": true
        }
      ],
      "returnType": "bool",
      "returnHelp": "Returns true on successful completion of the ingestion."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "IngestChanges",
      "groupname": "FDM.Repo",
      "fullname": "",
      "description": "Executes an incremental ingestion process for a specified list of changed files.",
      "args": [
        {
          "name": "planID",
          "type": "string",
          "description": "The NodeID of the ingest_plan to use for context.",
          "required": true
        },
        {
          "name": "filePaths",
          "type": "slice_string",
          "description": "A list of file paths that have been added or changed.",
          "required": true
        }
      ],
      "returnType": "bool",
      "returnHelp": "Returns true on successful completion of the incremental ingestion."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "patch",
      "groupname": "FDM.File",
      "fullname": "",
      "description": "Applies a diff patch to a file, writes it to disk, and triggers relevant FDM updates via events.",
      "args": [
        {
          "name": "path",
          "type": "string",
          "description": "The repository-relative path to the file to patch.",
          "required": true
        },
        {
          "name": "patchText",
          "type": "string",
          "description": "The patch content in standard diff format.",
          "required": true
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns a map with 'accepted': true and 'receipt_id' on success."
    },
    "requiresTrust": false,
    "isInternal": false,
    "requiredCaps": [
      {
        "Resource": "fs",
        "Verbs": [
          "write"
        ],
        "Scopes": null
      }
    ],
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "FindSymbol",
      "groupname": "FDM.SIO",
      "fullname": "",
      "description": "Finds all definitions of a given Go symbol from the Symbol Index Overlay.",
      "args": [
        {
          "name": "symbolName",
          "type": "string",
          "description": "The exact symbol name (e.g., 'NewFDM').",
          "required": true
        }
      ],
      "returnType": "slice_map",
      "returnHelp": "Returns a list of maps detailing symbol locations: NodeID, FilePath, Kind, Position, Recv."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "init_identity",
      "groupname": "fdm.admin",
      "fullname": "",
      "description": "Initializes a new core identity (FDM or SAI). Privileged.",
      "args": [
        {
          "name": "name",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "storage_uri",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "set_as_core",
          "type": "bool",
          "description": "",
          "required": true
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns a map containing details of the created identity (name, ulid, did, public_key, created_at, storage_uri)."
    },
    "requiresTrust": true,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "register_agent",
      "groupname": "fdm.admin",
      "fullname": "",
      "description": "Creates a signed agent node in the FDM. Privileged.",
      "args": [
        {
          "name": "identity_uri",
          "type": "string",
          "description": "The storage URI of the agent's identity document.",
          "required": true
        },
        {
          "name": "script_capsule",
          "type": "string",
          "description": "The capsule URI for the agent's script (e.g., 'capsule/my-agent').",
          "required": true
        },
        {
          "name": "agent_model",
          "type": "string",
          "description": "The registered name of the model for the agent (e.g., 'gpt-4o').",
          "required": true
        },
        {
          "name": "charter_capsule_id",
          "type": "string",
          "description": "The capsule name/URI for the agent's charter (e.g., 'capsule/sai_charter').",
          "required": false
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns a map representing the newly created agent node."
    },
    "requiresTrust": true,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "is_identity_set",
      "groupname": "fdm.admin",
      "fullname": "",
      "description": "Returns true if the FDM core identity has already been set.",
      "returnType": "bool",
      "returnHelp": "Returns true if the core identity is set, false otherwise."
    },
    "requiresTrust": true,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "grant_caps",
      "groupname": "fdm.admin",
      "fullname": "",
      "description": "Grants one or more capabilities to an agent by creating grant nodes.",
      "args": [
        {
          "name": "agent_did",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "capabilities",
          "type": "slice",
          "description": "",
          "required": true
        }
      ],
      "returnType": "slice",
      "returnHelp": "Returns a list of maps, each representing a created grant node."
    },
    "requiresTrust": true,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "set_agent_descriptor",
      "groupname": "fdm.admin",
      "fullname": "",
      "description": "Creates or updates an agent's runtime descriptor node.",
      "args": [
        {
          "name": "agent_did",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "interpreter",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "default_tools",
          "type": "slice",
          "description": "",
          "required": false
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns a map representing the created agent descriptor node."
    },
    "requiresTrust": true,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_sai_did",
      "groupname": "fdm.admin",
      "fullname": "",
      "description": "Returns the DID of the Supervising AI (SAI), which is the core identity of the FDM.",
      "returnType": "string",
      "returnHelp": "Returns the DID string of the SAI, or an error if not set."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "set_sai_did",
      "groupname": "fdm.admin",
      "fullname": "",
      "description": "Sets the DID of the Supervising AI (SAI) for the FDM instance. Privileged.",
      "args": [
        {
          "name": "did",
          "type": "string",
          "description": "The DID to set for the SAI.",
          "required": true
        }
      ],
      "returnType": "bool",
      "returnHelp": "Returns true on success."
    },
    "requiresTrust": true,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "GetOrCreateByDID",
      "groupname": "fdm.agent",
      "fullname": "",
      "description": "Finds an agent node by DID, creating a basic agent node if it doesn't exist.",
      "args": [
        {
          "name": "did",
          "type": "string",
          "description": "The decentralized identifier of the agent.",
          "required": true
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns a map representing the found or newly created agent node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "AssignModel",
      "groupname": "fdm.agent",
      "fullname": "",
      "description": "Assigns a specific AI model to an agent node by creating a new version of the node.",
      "args": [
        {
          "name": "did",
          "type": "string",
          "description": "The DID of the agent to modify.",
          "required": true
        },
        {
          "name": "modelName",
          "type": "string",
          "description": "The registered name of the model to assign (e.g., 'gpt-4o').",
          "required": true
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns a map representing the updated agent node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "SetRole",
      "groupname": "fdm.agent",
      "fullname": "",
      "description": "Sets the 'agent:role' field on an agent node, creating a new version.",
      "args": [
        {
          "name": "agent_map",
          "type": "map",
          "description": "A map representing the agent node (must include 'id').",
          "required": true
        },
        {
          "name": "role",
          "type": "string",
          "description": "The role string to set (e.g., 'developer', 'reviewer').",
          "required": true
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns a map representing the updated agent node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "LoadScriptSigned",
      "groupname": "fdm.agent",
      "fullname": "",
      "description": "Updates an agent node with a script path and signature, creating a new version.",
      "args": [
        {
          "name": "agent_map",
          "type": "map",
          "description": "A map representing the agent node (must include 'id').",
          "required": true
        },
        {
          "name": "script_path",
          "type": "string",
          "description": "The path or identifier for the agent's script source.",
          "required": true
        },
        {
          "name": "signature",
          "type": "string",
          "description": "The signature verifying the script's authenticity.",
          "required": true
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns a map representing the updated agent node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "CreateRoot",
      "groupname": "FDM.Forum",
      "fullname": "",
      "description": "Creates a new standalone root node for a forum or thread.",
      "args": [
        {
          "name": "title",
          "type": "string",
          "description": "The title of the forum.",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the NodeID of the newly created forum_root node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "CreateForProject",
      "groupname": "FDM.Forum",
      "fullname": "",
      "description": "Creates a new forum root and links it to a project.",
      "args": [
        {
          "name": "projectID",
          "type": "string",
          "description": "The NodeID of the project to associate with.",
          "required": true
        },
        {
          "name": "title",
          "type": "string",
          "description": "The title of the new forum.",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the NodeID of the newly created forum_root node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Post",
      "groupname": "FDM.Forum",
      "fullname": "",
      "description": "Posts a new message to a forum thread.",
      "args": [
        {
          "name": "rootID",
          "type": "string",
          "description": "The NodeID of the forum root (forum_root).",
          "required": true
        },
        {
          "name": "parentID",
          "type": "string",
          "description": "The NodeID of the message being replied to. If empty, this is a top-level post.",
          "required": false
        },
        {
          "name": "markdown",
          "type": "string",
          "description": "The markdown content of the message.",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the NodeID of the newly created forum_msg node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Vote",
      "groupname": "FDM.Forum",
      "fullname": "",
      "description": "Submits a unipolar (+1/support, 0/abstain) vote for a message.",
      "args": [
        {
          "name": "msgID",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "value",
          "type": "float",
          "description": "The vote value, typically 1.0 for 'yes' or 0.0 for 'no'.",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the NodeID of the newly created forum_vote node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Rate",
      "groupname": "FDM.Forum",
      "fullname": "",
      "description": "Submits a bipolar (-1..+1) quality rating for a message.",
      "args": [
        {
          "name": "msgID",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "rating",
          "type": "float",
          "description": "The rating value between -1.0 and 1.0.",
          "required": true
        },
        {
          "name": "reason",
          "type": "string",
          "description": "An optional brief justification for the rating.",
          "required": false
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the NodeID of the newly created forum_feedback node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Summarize",
      "groupname": "FDM.Forum",
      "fullname": "",
      "description": "Generates a summary node for a message using its aggregated vote and rating data.",
      "args": [
        {
          "name": "msgID",
          "type": "string",
          "description": "The NodeID of the message to summarize.",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the NodeID of the newly created forum_summary node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "ListThread",
      "groupname": "FDM.Forum",
      "fullname": "",
      "description": "Lists all messages in a forum thread, sorted by timestamp.",
      "args": [
        {
          "name": "rootID",
          "type": "string",
          "description": "The NodeID of the forum root to list.",
          "required": true
        }
      ],
      "returnType": "slice_map",
      "returnHelp": "Returns a list of maps, where each map is a full message node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "GetContextBundle",
      "groupname": "FDM.Forum",
      "fullname": "",
      "description": "Gets the last N messages of a thread as a single formatted string, suitable for an AI prompt.",
      "args": [
        {
          "name": "rootID",
          "type": "string",
          "description": "The NodeID of the forum root.",
          "required": true
        },
        {
          "name": "count",
          "type": "int",
          "description": "The number of recent messages to get (default 20, max 20).",
          "required": false
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns a single string with messages formatted as '[author]: content'."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "ListForums",
      "groupname": "FDM.Forum",
      "fullname": "",
      "description": "Lists all available forums with their core metadata.",
      "returnType": "slice_map",
      "returnHelp": "Returns a list of maps, where each map represents a forum root."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Publish",
      "groupname": "FDM.Bus",
      "fullname": "",
      "description": "Publishes a message to a topic on the FDM event bus (fire-and-forget). Payload must be Base64 encoded. Source is automatically set from the calling agent's context.",
      "args": [
        {
          "name": "topic",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "payload_base64",
          "type": "string",
          "description": "Base64 encoded string representing the payload bytes.",
          "required": true
        },
        {
          "name": "scope",
          "type": "string",
          "description": "Optional scope.",
          "required": false
        },
        {
          "name": "correlationId",
          "type": "string",
          "description": "Optional correlation ID.",
          "required": false
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the unique message ID assigned to the published event."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Request",
      "groupname": "FDM.Bus",
      "fullname": "",
      "description": "Sends a request message and waits for a reply. Request payload must be Base64 encoded. Source is automatically set from the calling agent's context.",
      "args": [
        {
          "name": "topic",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "payload_base64",
          "type": "string",
          "description": "Base64 encoded string representing the request payload bytes.",
          "required": true
        },
        {
          "name": "scope",
          "type": "string",
          "description": "Optional scope.",
          "required": false
        },
        {
          "name": "timeoutMs",
          "type": "int",
          "description": "Optional timeout (default 5s).",
          "required": false
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the reply payload as a string, or an error on timeout."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "admin_add_mount",
      "groupname": "FDM.Store",
      "fullname": "",
      "description": "Adds a mount point to the persistence router (privileged).",
      "args": [
        {
          "name": "mount_definition",
          "type": "map",
          "description": "",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns a confirmation message."
    },
    "requiresTrust": true,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "admin_add_alias",
      "groupname": "FDM.Store",
      "fullname": "",
      "description": "Adds an alias to the persistence router (privileged).",
      "args": [
        {
          "name": "alias_name",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "target_uri",
          "type": "string",
          "description": "",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns a confirmation message."
    },
    "requiresTrust": true,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "put",
      "groupname": "FDM.Store",
      "fullname": "",
      "description": "Saves a value to the persistence layer.",
      "args": [
        {
          "name": "uri",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "value",
          "type": "string",
          "description": "",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns 'ok' on success."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get",
      "groupname": "FDM.Store",
      "fullname": "",
      "description": "Retrieves a value from the persistence layer.",
      "args": [
        {
          "name": "uri",
          "type": "string",
          "description": "",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the stored value as a string, or nil if not found."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "list",
      "groupname": "FDM.Store",
      "fullname": "",
      "description": "Lists keys and values under a given URI prefix.",
      "args": [
        {
          "name": "uri_prefix",
          "type": "string",
          "description": "",
          "required": true
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns a map where keys are full URIs and values are stored strings."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "delete",
      "groupname": "FDM.Store",
      "fullname": "",
      "description": "Deletes a value from the persistence layer.",
      "args": [
        {
          "name": "uri",
          "type": "string",
          "description": "",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns 'ok' on success."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "ListDir",
      "groupname": "FDM.FS",
      "fullname": "",
      "description": "Lists the contents of a directory in the FDM.",
      "args": [
        {
          "name": "dirPath",
          "type": "string",
          "description": "The path of the directory to list.",
          "required": true
        },
        {
          "name": "recursive",
          "type": "bool",
          "description": "If true, lists contents recursively.",
          "required": false
        }
      ],
      "returnType": "slice_map",
      "returnHelp": "Returns a list of maps (file/dir nodes), or empty list."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Lookup",
      "groupname": "FDM.FS",
      "fullname": "",
      "description": "Looks up a specific path in the filesystem overlay.",
      "args": [
        {
          "name": "path",
          "type": "string",
          "description": "The exact path to look up.",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the NodeID string, or nil if not found."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "History",
      "groupname": "FDM.FS",
      "fullname": "",
      "description": "Retrieves the rename/move history for a given path.",
      "args": [
        {
          "name": "path",
          "type": "string",
          "description": "The current path to trace history for.",
          "required": true
        }
      ],
      "returnType": "slice_map",
      "returnHelp": "Returns a list of maps (rename nodes), or empty list."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "Rename",
      "groupname": "FDM.FS",
      "fullname": "",
      "description": "Records a rename/move event for a file or directory.",
      "args": [
        {
          "name": "srcPath",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "dstPath",
          "type": "string",
          "description": "",
          "required": true
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns a map representing the created fs_rename node."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_forum",
      "groupname": "FDM.Overlays",
      "fullname": "",
      "description": "Returns the canonical name of the forum overlay.",
      "returnType": "string",
      "returnHelp": "The string ID of the forum overlay (e.g., 'forum')."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_fco",
      "groupname": "FDM.Overlays",
      "fullname": "",
      "description": "Returns the canonical name of the File Content Overlay (FCO).",
      "returnType": "string",
      "returnHelp": "The string ID of the File Content Overlay (e.g., 'fco:git')."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_fileoverlay",
      "groupname": "FDM.Overlays",
      "fullname": "",
      "description": "Returns the canonical name of the File Overlay.",
      "returnType": "string",
      "returnHelp": "The string ID of the File Overlay (e.g., 'file')."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_fso",
      "groupname": "FDM.Overlays",
      "fullname": "",
      "description": "Returns the canonical name of the Filesystem Overlay.",
      "returnType": "string",
      "returnHelp": "The string ID of the Filesystem Overlay (e.g., 'fso:git')."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_fvo",
      "groupname": "FDM.Overlays",
      "fullname": "",
      "description": "Returns the canonical name of the File Version Overlay.",
      "returnType": "string",
      "returnHelp": "The string ID of the File Version Overlay (e.g., 'fvo')."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_legacy",
      "groupname": "FDM.Overlays",
      "fullname": "",
      "description": "Returns the canonical name of the legacy overlay.",
      "returnType": "string",
      "returnHelp": "The string ID of the legacy overlay (e.g., 'legacy')."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_natlang",
      "groupname": "FDM.Overlays",
      "fullname": "",
      "description": "Returns the canonical name of the natural language overlay.",
      "returnType": "string",
      "returnHelp": "The string ID of the natural language overlay (e.g., 'natlang')."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_neuromorphic",
      "groupname": "FDM.Overlays",
      "fullname": "",
      "description": "Returns the canonical name of the Neuromorphic Overlay.",
      "returnType": "string",
      "returnHelp": "The string ID of the Neuromorphic Overlay (e.g., 'neuromorphic')."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_plan",
      "groupname": "FDM.Overlays",
      "fullname": "",
      "description": "Returns the canonical name of the plan overlay.",
      "returnType": "string",
      "returnHelp": "The string ID of the plan overlay (e.g., 'plan')."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_sio",
      "groupname": "FDM.Overlays",
      "fullname": "",
      "description": "Returns the canonical name of the Symbol Index Overlay (SIO).",
      "returnType": "string",
      "returnHelp": "The string ID of the Symbol Index Overlay (e.g., 'sio')."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_summary",
      "groupname": "FDM.Overlays",
      "fullname": "",
      "description": "Returns the canonical name of the summary overlay.",
      "returnType": "string",
      "returnHelp": "The string ID of the summary overlay (e.g., 'summary')."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_welcome",
      "groupname": "FDM.Overlays",
      "fullname": "",
      "description": "Returns the canonical name of the welcome overlay.",
      "returnType": "string",
      "returnHelp": "The string ID of the welcome overlay (e.g., 'welcome')."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "set_bootstrap_config",
      "groupname": "system",
      "fullname": "",
      "description": "Sets the system's core bootstrap configuration. This is a privileged operation.",
      "args": [
        {
          "name": "fdm_name",
          "type": "string",
          "description": "The human-readable name for this FDM instance.",
          "required": true
        },
        {
          "name": "sai_agent_id",
          "type": "string",
          "description": "The full Agent ID (e.g., 'did:zadeh:sai') of the designated SAI.",
          "required": true
        }
      ],
      "returnType": "string"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "send",
      "groupname": "fdm.events",
      "fullname": "",
      "description": "Sends a pre-composed event object (from fdm.events.compose) to the FDM bus.",
      "args": [
        {
          "name": "event_object",
          "type": "map",
          "description": "A standard event object map, created with fdm.events.compose().",
          "required": true
        }
      ],
      "returnType": "bool",
      "returnHelp": "Returns true if the event was successfully published, false otherwise."
    },
    "requiresTrust": true,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_payload",
      "groupname": "fdm.events",
      "fullname": "",
      "description": "Extracts the payload from a standard event object.",
      "args": [
        {
          "name": "event_object",
          "type": "map",
          "description": "The event object received by an 'on event' handler.",
          "required": true
        }
      ],
      "returnType": "any",
      "returnHelp": "Returns the inner payload map or value."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_id",
      "groupname": "fdm.events",
      "fullname": "",
      "description": "Extracts the message ID from a standard event object.",
      "args": [
        {
          "name": "event_object",
          "type": "map",
          "description": "The event object received by an 'on event' handler.",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the event's unique message ID string."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_kind",
      "groupname": "fdm.events",
      "fullname": "",
      "description": "Extracts the kind (topic) from a standard event object.",
      "args": [
        {
          "name": "event_object",
          "type": "map",
          "description": "The event object received by an 'on event' handler.",
          "required": true
        }
      ],
      "returnType": "string",
      "returnHelp": "Returns the event's kind (topic) string."
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "compose",
      "groupname": "fdm.events",
      "fullname": "",
      "description": "Composes a new, standard event object suitable for sending with fdm.events.send.",
      "args": [
        {
          "name": "kind",
          "type": "string",
          "description": "The kind (topic) for the new event, e.g., 'agent.pong'.",
          "required": true
        },
        {
          "name": "payload",
          "type": "map",
          "description": "A map containing the data for the event payload.",
          "required": true
        }
      ],
      "returnType": "map",
      "returnHelp": "Returns the composed event object map."
    },
    "requiresTrust": true,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "put",
      "groupname": "fdm.persist",
      "fullname": "",
      "description": "Saves a value (string or bytes) to a storage URI.",
      "args": [
        {
          "name": "uri",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "value",
          "type": "any",
          "description": "",
          "required": true
        }
      ],
      "returnType": "string"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get",
      "groupname": "fdm.persist",
      "fullname": "",
      "description": "Retrieves a value from a storage URI as a string.",
      "args": [
        {
          "name": "uri",
          "type": "string",
          "description": "",
          "required": true
        }
      ],
      "returnType": "string"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "list",
      "groupname": "fdm.persist",
      "fullname": "",
      "description": "Lists all keys and values under a given URI prefix.",
      "args": [
        {
          "name": "uri_prefix",
          "type": "string",
          "description": "",
          "required": true
        }
      ],
      "returnType": "map"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "del",
      "groupname": "fdm.persist",
      "fullname": "",
      "description": "Deletes a value at a specific storage URI.",
      "args": [
        {
          "name": "uri",
          "type": "string",
          "description": "",
          "required": true
        }
      ],
      "returnType": "string"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "merged_prompt",
      "groupname": "context",
      "fullname": "",
      "description": "",
      "args": [
        {
          "name": "events",
          "type": "list",
          "description": "",
          "required": true
        }
      ],
      "returnType": "string"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "latest_event",
      "groupname": "context",
      "fullname": "",
      "description": "",
      "args": [
        {
          "name": "events",
          "type": "list",
          "description": "",
          "required": true
        }
      ],
      "returnType": "map"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "latest_node",
      "groupname": "context",
      "fullname": "",
      "description": "",
      "args": [
        {
          "name": "events",
          "type": "list",
          "description": "",
          "required": true
        }
      ],
      "returnType": "map"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_payload",
      "groupname": "context",
      "fullname": "",
      "description": "Extracts the business payload (data map or raw wrapper map) from a raw ns_event structure.",
      "args": [
        {
          "name": "event",
          "type": "map",
          "description": "",
          "required": true
        }
      ],
      "returnType": "map"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "add_mount",
      "groupname": "fdm.persist_admin",
      "fullname": "",
      "description": "Adds a new mount to the storage configuration. Privileged.",
      "args": [
        {
          "name": "mount_definition",
          "type": "map",
          "description": "A map defining the mount, e.g., {'prefix':'store://...','buckets':['b1']}",
          "required": false
        }
      ],
      "returnType": "string"
    },
    "requiresTrust": true,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "add_alias",
      "groupname": "fdm.persist_admin",
      "fullname": "",
      "description": "Adds a new alias to the storage configuration. Privileged.",
      "args": [
        {
          "name": "alias_name",
          "type": "string",
          "description": "",
          "required": true
        },
        {
          "name": "target_uri",
          "type": "string",
          "description": "",
          "required": true
        }
      ],
      "returnType": "string"
    },
    "requiresTrust": true,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_identity",
      "groupname": "fdm.agent",
      "fullname": "",
      "description": "Retrieves the agent's own core identity attributes.",
      "returnType": "map"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_model",
      "groupname": "fdm.agent",
      "fullname": "",
      "description": "Retrieves the agent's own default agent_model node.",
      "returnType": "map"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_node",
      "groupname": "fdm.agent",
      "fullname": "",
      "description": "Retrieves the agent's own FDM node.",
      "returnType": "map"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  },
  {
    "spec": {
      "name": "get_model_name",
      "groupname": "fdm.agent",
      "fullname": "",
      "description": "Retrieves the registered name of the agent's own default agent_model.",
      "returnType": "string"
    },
    "requiresTrust": false,
    "isInternal": false,
    "signatureChecksum": ""
  }
]